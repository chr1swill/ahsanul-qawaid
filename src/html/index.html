<!doctype html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ahsanul Qawaid</title>
  <style>
  *::before, *::after, *{ box-sizing: border-box; margin: 0px 0px; }
  html, body, ul{height:100%;width:100%;}
  body{gap: 8px 0px; background-color: black; color: gray;}
  ul{direction: rtl; list-style-type: none; display: grid; grid-template-columns: repeat(10, 1fr); grid-auto-flow: row dense;}
  li{cursor: pointer;display:flex;justify-content:center;align-items:center}
  button{all: unset;font-size: 64px;}
  button:focus-visible{border: 1px solid gray;}
  audio{}
  </style>
</head>
<body>
<h1>Ahsanul Qawaid</h1>
{{- range . -}}
<section id="{{- .Name -}}">
  <h2 id="{{- .Name -}}_title">Page {{ .Name -}}</h2>
  {{- $last := 0 -}}
  {{- if .Letters -}}
  <article>
    <h3>Letters:</h3>
    <ul id="{{- .Name -}}_letters">
      {{- $vowel := .Vowel -}}
      {{- $name := .Name -}}
      {{- range $i, $v := .Letters -}}
      <li>
        {{- if $vowel -}}
        <button>{{- printf "%s%s" $v $vowel -}}</button>
        {{- else -}}
        <button>{{- $v -}}</button>
        {{- end -}}

        {{- $idx := Add $i 1 -}}
        {{- if lt $idx 10 -}}
        <audio src='{{- printf "/audio/%s/0%d.mp3" $name $idx -}}'></audio>
        {{- else -}}
        <audio src='{{- printf "/audio/%s/%d.mp3" $name $idx -}}'></audio>
        {{- end -}}
      </li>
      {{- $last = $i -}}
      {{- end -}}
    </ul>
  </article>
  {{- $last = Add $last 1 -}}
  {{- else -}}
  {{- end -}}

  {{- if .Words -}}
  <article>
    <h3>Words:</h3>
    <ul id="{{- .Name -}}_words">
      {{- $name := .Name -}}
      {{- range $i, $v := .Words -}}
      <li>
        <button>{{- $v -}}</button>
        {{- $idx := Add $i 1 -}}
        {{- $idx := Add $last $idx -}}
        {{-  if lt $idx 10 -}}
        <audio src='{{- printf "/audio/%s/0%d.mp3" $name $idx -}}'></audio>
        {{- else -}}
        <audio src='{{- printf "/audio/%s/%d.mp3" $name $idx -}}'></audio>
        {{- end -}}
      </li>
      {{- end -}}
    </ul>
  </article>
  {{- end -}}
</section>
{{- end -}}
<script>
  document.body.onclick = function (e) {
    let el, audio;el=e.target;
    if (el.tagName !== "BUTTON") return;
    audio=el.nextElementSibling;
    console.assert(audio.tagName = "AUDIO");
    audio.play();
  };
</script>
</body>
</html>
